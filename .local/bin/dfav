#!/bin/sh

# Script to display bookmark selection on dmenu/rofi

if [ -z $DFAV_PATH ] || ![ -d $DFAV_PATH ]; then
	DFAV_PATH=$XDG_CONFIG_HOME/dfav
fi

STR=""

i=0
for FILE in $DFAV_PATH/*; do
	NAME[$i]=$(grep Name= $FILE | head -n 1 | cut -d"=" -f 2)
	ICON=$(grep Icon= $FILE | head -n 1 | cut -d"=" -f 2)
	CMD[$i]=$(grep Exec= $FILE | head -n 1 | cut -d"=" -f 2)
	STR="${STR}${ICON} ${NAME[$i]}|"
	i=$(expr $i + 1)
done

RES=$(echo "${STR}" | rofi -sep "|" -p "Select a bookmark" -dmenu -font "JetBrains Mono 10")

for j in $(seq 0 $i); do
	if [[ $RES == *"${NAME[j]}"* ]]; then
		exec ${CMD[j]}
	fi
done
